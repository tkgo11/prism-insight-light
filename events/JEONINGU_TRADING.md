# Jeon Ingu Contrarian Trading - ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ ì—­ë°œìƒ íˆ¬ì ì‹œë®¬ë ˆì´í„°

> **ìë™í™”ëœ ìœ íŠœë¸Œ ë¶„ì„ ë° ì—­ë°œìƒ íˆ¬ì ì‹œë®¬ë ˆì´ì…˜ ì‹œìŠ¤í…œ**
>
> ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ ì±„ë„ì„ ëª¨ë‹ˆí„°ë§í•˜ê³ , AIë¡œ ë¶„ì„í•˜ì—¬, ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë² íŒ…í•˜ëŠ” ì»¨íŠ¸ë¦¬ì–¸ ì „ëµì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
3. [ì‹œìŠ¤í…œ êµ¬ì¡°](#ì‹œìŠ¤í…œ-êµ¬ì¡°)
4. [ì„¤ì¹˜ ë°©ë²•](#ì„¤ì¹˜-ë°©ë²•)
5. [ì„¤ì • ê°€ì´ë“œ](#ì„¤ì •-ê°€ì´ë“œ)
6. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)
7. [ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°](#ë°ì´í„°ë² ì´ìŠ¤-êµ¬ì¡°)
8. [ì›¹ ëŒ€ì‹œë³´ë“œ ì—°ë™](#ì›¹-ëŒ€ì‹œë³´ë“œ-ì—°ë™)
9. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ê°œìš”

### ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œë€?

[ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ](https://www.youtube.com/@ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ)ëŠ” ìœ íŠœë¸Œ ì±„ë„ë¡œ, í•œêµ­ ì£¼ì‹ì‹œì¥ê³¼ ê²½ì œ ë¶„ì„ ì½˜í…ì¸ ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ì—­ë°œìƒ íˆ¬ì(Contrarian Investment)ë€?

**ì—­ë°œìƒ íˆ¬ì**ëŠ” ì‹œì¥ ì£¼ë¥˜ ì˜ê²¬ê³¼ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ë² íŒ…í•˜ëŠ” ì „ëµì…ë‹ˆë‹¤:

- **ìƒìŠ¹ ì˜ˆì¸¡ ì‹œ** â†’ í•˜ë½ì— ë² íŒ… (ì¸ë²„ìŠ¤ ETF)
- **í•˜ë½ ì˜ˆì¸¡ ì‹œ** â†’ ìƒìŠ¹ì— ë² íŒ… (ë ˆë²„ë¦¬ì§€ ETF)

### ì‹œìŠ¤í…œ ëª©ì 

ë³¸ ì‹œìŠ¤í…œì€:
1. ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œì˜ ì‹ ê·œ ì˜ìƒì„ ìë™ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§
2. Whisper APIë¡œ ìŒì„±ì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜
3. GPT-5ë¡œ ì‹œì¥ ì „ë§ ë¶„ì„
4. ì—­ë°œìƒ íˆ¬ì ì „ëµ ìƒì„± (JSON í˜•ì‹)
5. í…”ë ˆê·¸ë¨ ì±„ë„ì— ë¶„ì„ ìš”ì•½ ë©”ì‹œì§€ ë°œì†¡
6. **pykrxë¡œ ì‹¤ì‹œê°„ ê°€ê²© ì¡°íšŒ**
7. **ì‹œë®¬ë ˆì´ì…˜ ë§¤ë§¤ ì‹¤í–‰** (ì „ì•¡ íˆ¬ì ì „ëµ)
8. **SQLite ì´ë ¥ ì €ì¥** (ë‹¨ì¼ í†µí•© í…Œì´ë¸”)
9. í…”ë ˆê·¸ë¨ ì±„ë„ì— í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ ë©”ì‹œì§€ ë°œì†¡
10. ì›¹ ëŒ€ì‹œë³´ë“œë¥¼ í†µí•œ ì‹œê°í™”

âš ï¸ **ì‹¤ì œ ë§¤ë§¤ ì—°ë™ì´ ì•„ë‹Œ ì‹œë®¬ë ˆì´ì…˜**ì…ë‹ˆë‹¤. PRISM-INSIGHTì˜ ì‹¤ì œ ê³„ì¢Œì™€ êµ¬ë¶„ë˜ë„ë¡ ë³„ë„ í…Œì´ë¸”(`jeoningu_trades`)ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.

**í•µì‹¬ ì „ëµ**:
- **ì „ì•¡ íˆ¬ì (All-in)**: ë§¤ìˆ˜ ì‹œ ê°€ìš© ì”ì•¡ 100% íˆ¬ì
- **ë ˆë²„ë¦¬ì§€/ì¸ë²„ìŠ¤ 2X**: ìˆ˜ìµë¥  ê·¹ëŒ€í™”ë¥¼ ìœ„í•œ ê³ ìœ„í—˜-ê³ ìˆ˜ìµ ì¶”êµ¬
- **ì—­ë°œìƒ ë² íŒ…**: ì „ì¸êµ¬ì˜ ì˜ˆì¸¡ê³¼ ì •ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ íˆ¬ì

---

## ì£¼ìš” ê¸°ëŠ¥

### ğŸ¤– ìë™í™” ì›Œí¬í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Jeon Ingu Contrarian Trading                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. RSS Feed Monitoring                                     â”‚
â”‚     â””â”€ Detect new videos from ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ              â”‚
â”‚                                                              â”‚
â”‚  2. Audio Extraction (yt-dlp + FFmpeg)                      â”‚
â”‚     â””â”€ Download and extract audio as MP3                    â”‚
â”‚                                                              â”‚
â”‚  3. Transcription (OpenAI Whisper)                          â”‚
â”‚     â”œâ”€ Direct transcription (<25MB)                         â”‚
â”‚     â””â”€ Chunked transcription (>25MB, 10-min chunks)         â”‚
â”‚                                                              â”‚
â”‚  4. AI Analysis (GPT-5)                                     â”‚
â”‚     â”œâ”€ Content type detection (ë³¸ì¸ì˜ê²¬ vs ìŠ¤í‚µ)           â”‚
â”‚     â”œâ”€ Market sentiment analysis (ìƒìŠ¹/í•˜ë½/ì¤‘ë¦½)          â”‚
â”‚     â”œâ”€ Contrarian strategy generation                       â”‚
â”‚     â””â”€ Structured JSON output                               â”‚
â”‚                                                              â”‚
â”‚  5. Telegram Broadcasting (Analysis)                        â”‚
â”‚     â””â”€ Send analysis summary to Telegram channel           â”‚
â”‚                                                              â”‚
â”‚  6. Simulated Trading Execution                             â”‚
â”‚     â”œâ”€ Calculate position size (100% all-in)                â”‚
â”‚     â”œâ”€ Execute BUY/SELL (simulated)                         â”‚
â”‚     â””â”€ Save to SQLite database                              â”‚
â”‚                                                              â”‚
â”‚  7. Telegram Broadcasting (Portfolio Status)                â”‚
â”‚     â”œâ”€ Send current position info                           â”‚
â”‚     â”œâ”€ Send balance and performance metrics                 â”‚
â”‚     â””â”€ Show cumulative return                               â”‚
â”‚                                                              â”‚
â”‚  8. Performance Tracking                                    â”‚
â”‚     â”œâ”€ Calculate win rate, cumulative return                â”‚
â”‚     â””â”€ Export data for dashboard visualization              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š ë°ì´í„° ê´€ë¦¬

- **êµ¬ì¡°í™”ëœ JSON ì¶œë ¥**: Markdown ëŒ€ì‹  ì •í˜•í™”ëœ ë°ì´í„° ìƒì„±
- **SQLite ì˜ì†ì„±**: ì˜ìƒ, ë¶„ì„, ë§¤ë§¤ ì´ë ¥ ëª¨ë‘ DBì— ì €ì¥
- **í…”ë ˆê·¸ë¨ í†µí•©**: ìš”ì•½ ë©”ì‹œì§€ ìë™ ë°œì†¡
- **ëŒ€ì‹œë³´ë“œ ì—°ë™**: `examples/dashboard`ì—ì„œ ì‹œê°í™”

---

## ì‹œìŠ¤í…œ êµ¬ì¡°

### íŒŒì¼ êµ¬ì¡°

```
prism-insight/
â”œâ”€â”€ stock_tracking_db.sqlite     # í†µí•© SQLite DB (PRISM-INSIGHT ë©”ì¸ DB)
â””â”€â”€ events/
    â”œâ”€â”€ jeoningu_trading.py          # ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸
    â”œâ”€â”€ jeoningu_trading_db.py       # SQLite ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬
    â”œâ”€â”€ jeoningu_price_fetcher.py    # ì‹¤ì‹œê°„ ê°€ê²© ì¡°íšŒ (pykrx)
    â”œâ”€â”€ JEONINGU_TRADING.md          # ë³¸ ë¬¸ì„œ
    â”œâ”€â”€ jeoningu_video_history.json  # ì˜ìƒ ì´ë ¥ (ìë™ ìƒì„±)
    â”‚
    â”œâ”€â”€ logs/                         # ë¡œê·¸ íŒŒì¼ ì €ì¥ ë””ë ‰í† ë¦¬
    â”‚   â””â”€â”€ jeoningu_YYYYMMDD.log    # ì¼ë³„ ë¡œê·¸ íŒŒì¼
    â”‚
    â”œâ”€â”€ transcripts/                  # ìë§‰ íŒŒì¼ ì €ì¥ ë””ë ‰í† ë¦¬
    â”‚   â””â”€â”€ transcript_*.txt         # ì˜ìƒë³„ ìë§‰ íŒŒì¼
    â”‚
    â””â”€â”€ audio_temp/                   # ì„ì‹œ ì˜¤ë””ì˜¤ íŒŒì¼ ë””ë ‰í† ë¦¬
        â”œâ”€â”€ temp_audio.mp3           # ì„ì‹œ ì˜¤ë””ì˜¤ (ìë™ ì‚­ì œ)
        â””â”€â”€ temp_audio_chunk_*.mp3   # ë¶„í• ëœ ì„ì‹œ íŒŒì¼ (ìë™ ì‚­ì œ)
```

**ì‚°ì¶œë¬¼ ì •ë¦¬**:
- âœ… **ë¡œê·¸ íŒŒì¼**: `logs/` ë””ë ‰í† ë¦¬ì— ë‚ ì§œë³„ë¡œ ì €ì¥
- âœ… **ìë§‰ íŒŒì¼**: `transcripts/` ë””ë ‰í† ë¦¬ì— ì˜ìƒ IDë³„ë¡œ ì €ì¥
- âœ… **ì„ì‹œ ì˜¤ë””ì˜¤**: `audio_temp/` ë””ë ‰í† ë¦¬ì— ì €ì¥ í›„ ìë™ ì‚­ì œ
- âœ… `.gitignore`ì— í•˜ìœ„ ë””ë ‰í† ë¦¬ ì„¤ì •ë˜ì–´ ìˆìŒ (ë²„ì „ ê´€ë¦¬ ì œì™¸)

### ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”

**ì£¼ì˜**: PRISM-INSIGHT ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤(`stock_tracking_db.sqlite`)ì— í†µí•©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

#### ë‹¨ì¼ í†µí•© í…Œì´ë¸” ì„¤ê³„

ì „ì¸êµ¬ ì‹œë®¬ë ˆì´ì…˜ì€ **ë‹¨ 1ê°œì˜ í…Œì´ë¸”**(`jeoningu_trades`)ë§Œ ì‚¬ìš©í•©ë‹ˆë‹¤:
- ê° ì˜ìƒë‹¹ 1ê°œì˜ row
- ì˜ìƒ ì •ë³´ + AI ë¶„ì„ + ê±°ë˜ ì •ë³´ê°€ ëª¨ë‘ í¬í•¨
- `related_buy_id`ë¥¼ í†µí•´ ë§¤ìˆ˜-ë§¤ë„ ì—°ê²°

---

## ì„¤ì¹˜ ë°©ë²•

### 1. ì‚¬ì „ ì¤€ë¹„ ì‚¬í•­

#### Python 3.10+
```bash
python --version  # 3.10 ì´ìƒ í™•ì¸
```

#### FFmpeg (ì˜¤ë””ì˜¤ ì²˜ë¦¬ìš©)
```bash
# Ubuntu/Debian
sudo apt-get install ffmpeg

# macOS
brew install ffmpeg

# Rocky Linux/CentOS
sudo dnf install ffmpeg
```

### 2. Python íŒ¨í‚¤ì§€ ì„¤ì¹˜

í•„ìš”í•œ íŒ¨í‚¤ì§€ê°€ ì´ë¯¸ `requirements.txt`ì— í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
```bash
pip install -r requirements.txt
```

ì£¼ìš” íŒ¨í‚¤ì§€:
- `openai`: Whisper API ë° GPT-5
- `yt-dlp`: YouTube ì˜¤ë””ì˜¤ ì¶”ì¶œ
- `feedparser`: RSS íŒŒì‹±
- `pydub`: ì˜¤ë””ì˜¤ íŒŒì¼ ë¶„í•  (>25MB íŒŒì¼ìš©)
- `aiosqlite`: ë¹„ë™ê¸° SQLite
- `python-telegram-bot`: í…”ë ˆê·¸ë¨ ì—°ë™
- `mcp-agent`: AI ì—ì´ì „íŠ¸ í”„ë ˆì„ì›Œí¬
- `pykrx`: í•œêµ­ ì£¼ì‹ ì‹¤ì‹œê°„ ê°€ê²© ì¡°íšŒ

### 3. ì„¤ì • íŒŒì¼ ì¤€ë¹„

í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ:
```bash
# mcp_agent.secrets.yaml ì„¤ì •
cp mcp_agent.secrets.yaml.example mcp_agent.secrets.yaml
vi mcp_agent.secrets.yaml

# .env ì„¤ì • (í…”ë ˆê·¸ë¨ìš©)
cp .env.example .env
vi .env
```

---

## ì„¤ì • ê°€ì´ë“œ

### 1. OpenAI API Key ì„¤ì •

**íŒŒì¼**: `mcp_agent.secrets.yaml`

```yaml
openai:
  api_key: "sk-..." # ì‹¤ì œ OpenAI API í‚¤ ì…ë ¥
```

- OpenAI API í‚¤ëŠ” [OpenAI Platform](https://platform.openai.com/api-keys)ì—ì„œ ë°œê¸‰
- Whisper API ë° GPT-5 ì‚¬ìš©

### 2. Telegram ì„¤ì • (ì„ íƒì‚¬í•­)

**íŒŒì¼**: `.env`

```bash
# Telegram Bot Token (BotFatherì—ì„œ ë°œê¸‰)
TELEGRAM_BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrsTUVwxyz"

# Telegram Channel ID (ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ì±„ë„)
TELEGRAM_CHANNEL_ID="-1001234567890"
```

í…”ë ˆê·¸ë¨ ë´‡ ìƒì„± ë°©ë²•:
1. Telegramì—ì„œ [@BotFather](https://t.me/BotFather) ì°¾ê¸°
2. `/newbot` ëª…ë ¹ìœ¼ë¡œ ë´‡ ìƒì„±
3. Bot Token ë³µì‚¬
4. ë´‡ì„ ì±„ë„ì— ì¶”ê°€í•˜ê³  ê´€ë¦¬ì ê¶Œí•œ ë¶€ì—¬
5. Channel ID í™•ì¸ (ë´‡ìœ¼ë¡œ ë©”ì‹œì§€ ë³´ë‚¸ í›„ `getUpdates` APIë¡œ í™•ì¸)

í…”ë ˆê·¸ë¨ ì‚¬ìš© ì•ˆ í•  ê²½ìš°:
```bash
python events/jeoningu_trading.py --no-telegram
```

### 3. MCP Agent ì„¤ì •

**íŒŒì¼**: `mcp_agent.config.yaml`

`reasoning_effort` ê°’ì„ í™•ì¸í•˜ì„¸ìš”:
```yaml
openai:
  default_model: gpt-5
  reasoning_effort: medium  # 'none'ì´ ì•„ë‹Œ 'low', 'medium', 'high' ì¤‘ í•˜ë‚˜
```

---

## ì‚¬ìš© ë°©ë²•

### ì¼ë°˜ ëª¨ë“œ (RSS ëª¨ë‹ˆí„°ë§)

ì‹ ê·œ ì˜ìƒì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ê³  ì²˜ë¦¬:

```bash
python events/jeoningu_trading.py
```

**ì²« ì‹¤í–‰ ì‹œ**:
- ê¸°ì¡´ ì˜ìƒ ì´ë ¥ì„ ì´ˆê¸°í™”ë§Œ í•˜ê³  ì¢…ë£Œ
- ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„° ì‹ ê·œ ì˜ìƒ ê°ì§€ ë° ì²˜ë¦¬

**ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„°**:
- ì‹ ê·œ ì˜ìƒ ê°ì§€
- ì˜¤ë””ì˜¤ ì¶”ì¶œ â†’ ìë§‰ ë³€í™˜ â†’ AI ë¶„ì„ â†’ í…”ë ˆê·¸ë¨ ë°œì†¡ â†’ ì‹œë®¬ë ˆì´ì…˜ ë§¤ë§¤

### í…ŒìŠ¤íŠ¸ ëª¨ë“œ (íŠ¹ì • ì˜ìƒ URL)

íŠ¹ì • ì˜ìƒë§Œ ë¶„ì„:

```bash
python events/jeoningu_trading.py --video-url "https://www.youtube.com/watch?v=VIDEO_ID"
```

ì˜ˆì‹œ:
```bash
python events/jeoningu_trading.py --video-url "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

### í…”ë ˆê·¸ë¨ ë¹„í™œì„±í™”

í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ë°œì†¡ ê±´ë„ˆë›°ê¸°:

```bash
python events/jeoningu_trading.py --no-telegram
```

### Cron ìë™í™”

ë§¤ì¼ íŠ¹ì • ì‹œê°„ì— ìë™ ì‹¤í–‰:

```bash
# Crontab í¸ì§‘
crontab -e

# ë§¤ì¼ ì˜¤í›„ 6ì‹œì— ì‹¤í–‰
0 18 * * * cd /path/to/prism-insight && python events/jeoningu_trading.py >> events/cron.log 2>&1
```

---

## ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### í†µí•© ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

ì „ì¸êµ¬ ì‹œë®¬ë ˆì´ì…˜ì€ PRISM-INSIGHT ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤(`stock_tracking_db.sqlite`)ì— **í†µí•©**ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**ì¥ì **:
- ì‹¤ì œ ê±°ë˜ ì´ë ¥ê³¼ ì‹œë®¬ë ˆì´ì…˜ ì´ë ¥ì´ ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬ë¨
- í•˜ë‚˜ì˜ DB íŒŒì¼ë¡œ ì „ì²´ ì‹œìŠ¤í…œ ê´€ë¦¬
- ëŒ€ì‹œë³´ë“œì—ì„œ í†µí•© ì¡°íšŒ ê°€ëŠ¥

### í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ

#### `jeoningu_trades` - ë‹¨ì¼ í†µí•© í…Œì´ë¸”

ê° ì˜ìƒë‹¹ 1ê°œì˜ rowê°€ ìƒì„±ë˜ë©°, ì˜ìƒ ì •ë³´ + ë¶„ì„ ê²°ê³¼ + ê±°ë˜ ì •ë³´ê°€ ëª¨ë‘ í¬í•¨ë©ë‹ˆë‹¤.

| ì»¬ëŸ¼ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| **ê¸°ë³¸ í‚¤** ||||
| `id` | INTEGER | âœ“ | Auto-increment ê±°ë˜ ID |
| **ì˜ìƒ ì •ë³´** ||||
| `video_id` | TEXT | âœ“ | YouTube ì˜ìƒ ID (UNIQUE) |
| `video_title` | TEXT | âœ“ | ì˜ìƒ ì œëª© |
| `video_date` | TEXT | âœ“ | ì˜ìƒ ê²Œì‹œ ë‚ ì§œ (ISO 8601) |
| `video_url` | TEXT | âœ“ | YouTube URL |
| `analyzed_date` | TEXT | âœ“ | AI ë¶„ì„ ìˆ˜í–‰ ë‚ ì§œ |
| **AI ë¶„ì„ ê²°ê³¼** ||||
| `jeon_sentiment` | TEXT | âœ“ | ì „ì¸êµ¬ ê¸°ì¡° (ìƒìŠ¹/í•˜ë½/ì¤‘ë¦½) |
| `jeon_reasoning` | TEXT | | ì „ì¸êµ¬ì˜ í•µì‹¬ ë°œì–¸ ìš”ì•½ |
| `contrarian_action` | TEXT | âœ“ | ì—­ë°œìƒ ì•¡ì…˜ (ì¸ë²„ìŠ¤ë§¤ìˆ˜/KODEXë§¤ìˆ˜/ì „ëŸ‰ë§¤ë„) |
| **ê±°ë˜ ì‹¤í–‰ ì •ë³´** ||||
| `trade_type` | TEXT | | ê±°ë˜ ìœ í˜• (BUY/SELL/HOLD) |
| `stock_code` | TEXT | | ì¢…ëª© ì½”ë“œ (069500 ë˜ëŠ” 114800) |
| `stock_name` | TEXT | | ì¢…ëª©ëª… (KODEX 200 ë˜ëŠ” KODEX ì¸ë²„ìŠ¤) |
| `quantity` | INTEGER | | ë§¤ìˆ˜/ë§¤ë„ ìˆ˜ëŸ‰ |
| `price` | REAL | | ì²´ê²° ê°€ê²© (pykrxì—ì„œ ì¡°íšŒ) |
| `amount` | REAL | | ê±°ë˜ ê¸ˆì•¡ (quantity Ã— price) |
| **ìˆ˜ìµ ì¶”ì ** ||||
| `related_buy_id` | INTEGER | | ë§¤ë„ ì‹œ ì—°ê²°ëœ ë§¤ìˆ˜ ê±°ë˜ ID (FK) |
| `profit_loss` | REAL | | ì†ìµ ê¸ˆì•¡ (ë§¤ë„ ì‹œ) |
| `profit_loss_pct` | REAL | | ì†ìµë¥  (%) |
| **í¬íŠ¸í´ë¦¬ì˜¤ ìƒíƒœ** ||||
| `balance_before` | REAL | âœ“ | ê±°ë˜ ì „ ì”ì•¡ |
| `balance_after` | REAL | âœ“ | ê±°ë˜ í›„ ì”ì•¡ |
| `cumulative_return_pct` | REAL | | ëˆ„ì  ìˆ˜ìµë¥  (%) |
| **ë©”íƒ€ë°ì´í„°** ||||
| `notes` | TEXT | | ì¶”ê°€ ë©”ëª¨ |
| `created_at` | TEXT | | ë ˆì½”ë“œ ìƒì„± ì‹œê° (DEFAULT CURRENT_TIMESTAMP) |

**ì¸ë±ìŠ¤**:
- `idx_jeoningu_video_id` on `video_id`
- `idx_jeoningu_analyzed_date` on `analyzed_date DESC`
- `idx_jeoningu_trade_type` on `trade_type`

### ë°ì´í„° íë¦„ ì˜ˆì‹œ

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì²« ë§¤ìˆ˜
```sql
-- ì „ì¸êµ¬ "ìƒìŠ¹" â†’ ì—­ë°œìƒ ì¸ë²„ìŠ¤ ë§¤ìˆ˜
INSERT INTO jeoningu_trades (
  video_id, video_title, jeon_sentiment, contrarian_action,
  trade_type, stock_code, stock_name, quantity, price, amount,
  balance_before, balance_after
) VALUES (
  'abc123', 'ì „ì¸êµ¬: ì‹œì¥ ìƒìŠ¹ ì˜ˆìƒ', 'ìƒìŠ¹', 'ì¸ë²„ìŠ¤ë§¤ìˆ˜',
  'BUY', '114800', 'KODEX ì¸ë²„ìŠ¤', 100, 10000, 1000000,
  10000000, 10000000  -- í˜„ê¸ˆâ†’ì£¼ì‹ ì „í™˜ì´ë¯€ë¡œ balance ë³€ë™ ì—†ìŒ
);
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¤‘ë¦½ ê¸°ì¡°ë¡œ ë§¤ë„
```sql
-- ì „ì¸êµ¬ "ì¤‘ë¦½" â†’ ì „ëŸ‰ ë§¤ë„
INSERT INTO jeoningu_trades (
  video_id, video_title, jeon_sentiment, contrarian_action,
  trade_type, stock_code, stock_name, quantity, price, amount,
  related_buy_id, profit_loss, profit_loss_pct,
  balance_before, balance_after, cumulative_return_pct
) VALUES (
  'def456', 'ì „ì¸êµ¬: ë°©í–¥ì„± ëª¨í˜¸', 'ì¤‘ë¦½', 'ì „ëŸ‰ë§¤ë„',
  'SELL', '114800', 'KODEX ì¸ë²„ìŠ¤', 100, 10500, 1050000,
  1, 50000, 5.0,  -- ì´ì „ ë§¤ìˆ˜(ID=1) ëŒ€ë¹„ +5%
  10000000, 10050000, 0.5  -- ì”ì•¡ ì¦ê°€, ëˆ„ì  ìˆ˜ìµë¥  +0.5%
);
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ë³´ìœ  ì¢…ëª© ì—†ì„ ë•Œ ì¤‘ë¦½
```sql
-- ë³´ìœ  ì¢…ëª© ì—†ëŠ” ìƒíƒœì—ì„œ ì¤‘ë¦½ â†’ HOLD
INSERT INTO jeoningu_trades (
  video_id, video_title, jeon_sentiment, contrarian_action,
  trade_type, balance_before, balance_after, cumulative_return_pct, notes
) VALUES (
  'ghi789', 'ì „ì¸êµ¬: ì—¬ì „íˆ ì¤‘ë¦½', 'ì¤‘ë¦½', 'ê´€ë§',
  'HOLD', 10050000, 10050000, 0.5, 'ë³´ìœ  ì¢…ëª© ì—†ìŒ, í˜„ê¸ˆ ë³´ìœ '
);
```

### ì£¼ìš” ì¿¼ë¦¬ íŒ¨í„´

#### í˜„ì¬ ë³´ìœ  ì¢…ëª© í™•ì¸
```python
# ë¡œì§: ë§ˆì§€ë§‰ BUYë¥¼ ì°¾ê³ , ê·¸ ì´í›„ SELLì´ ìˆëŠ”ì§€ í™•ì¸
async def get_current_position():
    # 1. ë§ˆì§€ë§‰ BUY ì°¾ê¸°
    last_buy = SELECT * FROM jeoningu_trades 
               WHERE trade_type = 'BUY' 
               ORDER BY id DESC LIMIT 1
    
    # 2. í•´ë‹¹ BUYì— ì—°ê²°ëœ SELLì´ ìˆëŠ”ì§€ í™•ì¸
    sell_count = SELECT COUNT(*) FROM jeoningu_trades 
                 WHERE trade_type = 'SELL' 
                 AND related_buy_id = last_buy.id
    
    # 3. SELLì´ ì—†ìœ¼ë©´ í˜„ì¬ ë³´ìœ  ì¤‘
    if sell_count == 0:
        return last_buy
    return None
```

#### ì„±ê³¼ ì§€í‘œ ê³„ì‚°
```python
async def calculate_performance_metrics():
    # ëª¨ë“  SELL ê±°ë˜ì—ì„œ ì†ìµ ì§‘ê³„
    sell_trades = SELECT profit_loss, profit_loss_pct 
                  FROM jeoningu_trades 
                  WHERE trade_type = 'SELL'
    
    total_trades = len(sell_trades)
    winning_trades = count(profit_loss > 0)
    win_rate = winning_trades / total_trades * 100
    
    # ìµœì‹  ëˆ„ì  ìˆ˜ìµë¥ 
    latest = SELECT cumulative_return_pct, balance_after 
             FROM jeoningu_trades 
             ORDER BY id DESC LIMIT 1
    
    return {
        "total_trades": total_trades,
        "winning_trades": winning_trades,
        "win_rate": win_rate,
        "cumulative_return": latest.cumulative_return_pct,
        "latest_balance": latest.balance_after
    }
```

### ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

```bash
# Pythonìœ¼ë¡œ ì§ì ‘ ì´ˆê¸°í™”
python -c "import asyncio; from events.jeoningu_trading_db import init_database; asyncio.run(init_database())"
```

ë˜ëŠ” `jeoningu_trading.py` ì²« ì‹¤í–‰ ì‹œ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.

---

## ì›¹ ëŒ€ì‹œë³´ë“œ ì—°ë™

### Dashboard ì´ë²¤íŠ¸ íƒ­ ì¶”ê°€ (ì˜ˆì •)

`examples/dashboard`ì˜ Next.js í”„ë¡ íŠ¸ì—”ë“œì— **ì´ë²¤íŠ¸ íƒ­**ì„ ì¶”ê°€í•˜ì—¬ ì‹œê°í™”:

#### êµ¬í˜„ ì˜ˆì • ê¸°ëŠ¥:
1. **ê±°ë˜ ì´ë ¥ í…Œì´ë¸”**: ë§¤ìˆ˜/ë§¤ë„ ì´ë ¥ì„ í‘œë¡œ í‘œì‹œ
2. **ìˆ˜ìµë¥  ì°¨íŠ¸**: ëˆ„ì  ìˆ˜ìµë¥  ì¶”ì´ ê·¸ë˜í”„
3. **ìŠ¹ë¥  ë¶„ì„**: ìŠ¹/íŒ¨ ë¹„ìœ¨, í‰ê·  ìˆ˜ìµë¥ 
4. **ì˜ìƒë³„ ì„±ê³¼**: ì–´ë–¤ ì˜ìƒì´ ê°€ì¥ ì¢‹ì€ ì„±ê³¼ë¥¼ ëƒˆëŠ”ì§€
5. **ì¢…ëª©ë³„ í†µê³„**: ì–´ë–¤ ì¢…ëª©ì´ ìì£¼ ê±°ë˜ë˜ì—ˆëŠ”ì§€

#### API ì—”ë“œí¬ì¸íŠ¸ (ë°±ì—”ë“œ ì¶”ê°€ í•„ìš”):
```python
# examples/dashboard/backend/api/jeoningu.py

from events.jeoningu_trading_db import JeoninguTradingDB

@app.get("/api/jeoningu/trades")
async def get_trades(limit: int = 100):
    """Get recent trade history"""
    db = JeoninguTradingDB()
    await db.initialize()
    trades = await db.get_trade_history(limit=limit)
    return {"trades": trades}

@app.get("/api/jeoningu/position")
async def get_position():
    """Get current position"""
    db = JeoninguTradingDB()
    await db.initialize()
    position = await db.get_current_position()
    balance = await db.get_latest_balance()
    return {
        "position": position,
        "balance": balance
    }

@app.get("/api/jeoningu/performance")
async def get_performance():
    """Get performance metrics"""
    db = JeoninguTradingDB()
    await db.initialize()
    metrics = await db.calculate_performance_metrics()
    return metrics

@app.get("/api/jeoningu/dashboard")
async def get_dashboard():
    """Get all dashboard data"""
    db = JeoninguTradingDB()
    await db.initialize()
    data = await db.get_dashboard_data()
    return data
```

#### í”„ë¡ íŠ¸ì—”ë“œ ì»´í¬ë„ŒíŠ¸ (React):
```tsx
// components/JeoninguEventTab.tsx
import { useQuery } from 'react-query';

export function JeoninguEventTab() {
  const { data: dashboard } = useQuery('jeoningu-dashboard', fetchDashboard);

  return (
    <div>
      <h2>ì „ì¸êµ¬ ì—­ë°œìƒ íˆ¬ì ì‹œë®¬ë ˆì´ì…˜</h2>

      {/* ì„±ê³¼ ìš”ì•½ */}
      <MetricsSummary 
        metrics={dashboard?.performance} 
        balance={dashboard?.current_balance}
      />

      {/* í˜„ì¬ í¬ì§€ì…˜ */}
      <CurrentPosition position={dashboard?.current_position} />

      {/* ìˆ˜ìµë¥  ì°¨íŠ¸ */}
      <CumulativeReturnChart history={dashboard?.trade_history} />

      {/* ê±°ë˜ ì´ë ¥ í…Œì´ë¸” */}
      <TradesTable trades={dashboard?.trade_history} />
    </div>
  );
}
```

---

## ë¬¸ì œ í•´ê²°

### 1. `pydub`ê°€ ì„¤ì¹˜ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**:
```
ImportError: pydub is not installed
```

**í•´ê²°**:
```bash
pip install pydub
```

FFmpegë„ í•¨ê»˜ ì„¤ì¹˜ í•„ìš”:
```bash
# Ubuntu/Debian
sudo apt-get install ffmpeg

# macOS
brew install ffmpeg
```

### 2. Whisper API 25MB ì œí•œ ì˜¤ë¥˜

**ì¦ìƒ**:
```
Error: File size exceeds 25MB limit
```

**í•´ê²°**:
- ìë™ìœ¼ë¡œ 10ë¶„ ì²­í¬ë¡œ ë¶„í• í•˜ì—¬ ì²˜ë¦¬
- `_transcribe_large_file()` ë©”ì„œë“œê°€ ìë™ ì²˜ë¦¬
- FFmpegê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨

### 3. Telegram ë©”ì‹œì§€ ë°œì†¡ ì‹¤íŒ¨

**ì¦ìƒ**:
```
Failed to send Telegram message
```

**í™•ì¸ ì‚¬í•­**:
1. `.env`ì— `TELEGRAM_BOT_TOKEN`ê³¼ `TELEGRAM_CHANNEL_ID` ì„¤ì • í™•ì¸
2. ë´‡ì´ ì±„ë„ì— ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì¶”ê°€ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
3. Channel IDê°€ `-100` ìœ¼ë¡œ ì‹œì‘í•˜ëŠ”ì§€ í™•ì¸ (ìŠˆí¼ê·¸ë£¹ì˜ ê²½ìš°)

**ì„ì‹œ íšŒí”¼**:
```bash
python events/jeoningu_trading.py --no-telegram
```

### 4. JSON íŒŒì‹± ì—ëŸ¬

**ì¦ìƒ**:
```
Failed to parse JSON from LLM response
```

**ì›ì¸**:
- GPT-5ê°€ ê°€ë” JSONì„ ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ìœ¼ë¡œ ê°ì‹¸ì„œ ë°˜í™˜

**í•´ê²°**:
- ìŠ¤í¬ë¦½íŠ¸ì— ìë™ í´ë¦¬ë‹ ë¡œì§ í¬í•¨ë¨
- `result_clean = result.strip()` ë“±ìœ¼ë¡œ ì²˜ë¦¬

### 5. MCPApp context ì—ëŸ¬

**ì¦ìƒ**:
```
RuntimeError: No context available for OpenAIAugmentedLLM
```

**í•´ê²°**:
`mcp_agent.config.yaml` í™•ì¸:
```yaml
openai:
  reasoning_effort: medium  # 'none'ì´ ì•„ë‹Œ ê°’ìœ¼ë¡œ ì„¤ì •
```

### 6. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” ì•ˆ ë¨

**ì¦ìƒ**:
```
sqlite3.OperationalError: no such table: jeoningu_trades
```

**í•´ê²°**:
ì²« ì‹¤í–‰ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ê°€ ìë™ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì§€ë§Œ, ìˆ˜ë™ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ë ¤ë©´:
```bash
python -c "import asyncio; from events.jeoningu_trading_db import init_database; asyncio.run(init_database())"
```

ë˜ëŠ” í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰:
```bash
python events/jeoningu_trading_db.py
```

### 7. ì˜ìƒì´ ê°ì§€ë˜ì§€ ì•ŠìŒ

**í™•ì¸ ì‚¬í•­**:
1. RSS URLì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸:
   ```python
   https://www.youtube.com/feeds/videos.xml?channel_id=UCznImSIaxZR7fdLCICLdgaQ
   ```
2. ì²« ì‹¤í–‰ í›„ ë‘ ë²ˆì§¸ ì‹¤í–‰ë¶€í„° ì‹ ê·œ ì˜ìƒ ê°ì§€ë¨
3. `jeoningu_video_history.json` íŒŒì¼ í™•ì¸

---

## ì¶”ê°€ ì •ë³´

### ê±°ë˜ ì¢…ëª©

ë³¸ ì‹œìŠ¤í…œì€ **2ê°œì˜ ë ˆë²„ë¦¬ì§€/ì¸ë²„ìŠ¤ ETFë§Œ** ì‚¬ìš©í•©ë‹ˆë‹¤:

#### 1. KODEX ë ˆë²„ë¦¬ì§€ (122630)
- **ìš©ë„**: ìƒìŠ¹ ë² íŒ… (2ë°° ë ˆë²„ë¦¬ì§€)
- **ì„¤ëª…**: ì½”ìŠ¤í”¼ 200 ì§€ìˆ˜ë¥¼ 2ë°°ë¡œ ì¶”ì¢…í•˜ëŠ” ë ˆë²„ë¦¬ì§€ ETF
- **ì „ëµ**: ì „ì¸êµ¬ "í•˜ë½" ì˜ˆì¸¡ â†’ ì—­ë°œìƒìœ¼ë¡œ KODEX ë ˆë²„ë¦¬ì§€ ë§¤ìˆ˜
- **íŠ¹ì§•**: ì‹œì¥ ìƒìŠ¹ ì‹œ 2ë°° ìˆ˜ìµ, í•˜ë½ ì‹œ 2ë°° ì†ì‹¤

#### 2. KODEX 200ì„ ë¬¼ì¸ë²„ìŠ¤2X (252670)
- **ìš©ë„**: í•˜ë½ ë² íŒ… (2ë°° ì¸ë²„ìŠ¤)
- **ì„¤ëª…**: ì½”ìŠ¤í”¼ 200 ì§€ìˆ˜ì˜ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ 2ë°° ì›€ì§ì´ëŠ” ì¸ë²„ìŠ¤ ETF
- **ì „ëµ**: ì „ì¸êµ¬ "ìƒìŠ¹" ì˜ˆì¸¡ â†’ ì—­ë°œìƒìœ¼ë¡œ KODEX 200ì„ ë¬¼ì¸ë²„ìŠ¤2X ë§¤ìˆ˜
- **íŠ¹ì§•**: ì‹œì¥ í•˜ë½ ì‹œ 2ë°° ìˆ˜ìµ, ìƒìŠ¹ ì‹œ 2ë°° ì†ì‹¤

#### í¬ì§€ì…˜ ê´€ë¦¬ ê·œì¹™
- í•­ìƒ **1ê°œ ì¢…ëª©ë§Œ ë³´ìœ **
- **ì „ì•¡ íˆ¬ì ì „ëµ**: ë§¤ìˆ˜ ì‹œ ê°€ìš© ì”ì•¡ 100% íˆ¬ì (All-in)
- ì´ˆê¸° ìë³¸: **1ì²œë§Œì›**
- ì¢…ëª© ì „í™˜ ì‹œ: ê¸°ì¡´ ì¢…ëª© ë§¤ë„ â†’ ìƒˆ ì¢…ëª© ë§¤ìˆ˜
- ì¤‘ë¦½ ì‹œ: ë³´ìœ  ì¢…ëª© ìˆìœ¼ë©´ ì „ëŸ‰ ë§¤ë„ (í˜„ê¸ˆí™”)

#### ê°€ê²© ì¡°íšŒ
- **pykrx** ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì‹¤ì‹œê°„ ê°€ê²© ì¡°íšŒ
- `jeoningu_price_fetcher.py` ëª¨ë“ˆ ì‚¬ìš©
- ìµœê·¼ ê±°ë˜ì¼ì˜ ì¢…ê°€ ê¸°ì¤€

#### ì™œ ë ˆë²„ë¦¬ì§€/ì¸ë²„ìŠ¤ 2Xì¸ê°€?
- **ìˆ˜ìµë¥  ê·¹ëŒ€í™”**: ì¼ë°˜ ETF ëŒ€ë¹„ 2ë°°ì˜ ë³€ë™ì„±ìœ¼ë¡œ ë‹¨ê¸° ìˆ˜ìµ ê·¹ëŒ€í™”
- **ëª…í™•í•œ ë°©í–¥ì„±**: ì „ì¸êµ¬ì˜ ì˜ˆì¸¡ê³¼ ì •ë°˜ëŒ€ë¡œ ë² íŒ…í•˜ë¯€ë¡œ, 2ë°° ë ˆë²„ë¦¬ì§€ê°€ ì „ëµì— ë¶€í•©
- **ë¦¬ìŠ¤í¬ ì¸ì§€**: 2ë°° ì†ì‹¤ ê°€ëŠ¥ì„±ë„ ìˆì§€ë§Œ, ì—­ë°œìƒ ì „ëµì˜ íŠ¹ì„±ìƒ ê³ ìœ„í—˜-ê³ ìˆ˜ìµ ì¶”êµ¬

### ì°¸ê³  ìë£Œ

- [ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ YouTube ì±„ë„](https://www.youtube.com/@ì „ì¸êµ¬ê²½ì œì—°êµ¬ì†Œ)
- [OpenAI Whisper API ë¬¸ì„œ](https://platform.openai.com/docs/guides/speech-to-text)
- [yt-dlp GitHub](https://github.com/yt-dlp/yt-dlp)
- [python-telegram-bot ë¬¸ì„œ](https://docs.python-telegram-bot.org/)

### ë¼ì´ì„ ìŠ¤

ë³¸ ì‹œìŠ¤í…œì€ PRISM-INSIGHT í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ, ë™ì¼í•œ ë¼ì´ì„ ìŠ¤ë¥¼ ë”°ë¦…ë‹ˆë‹¤.

### ë©´ì±… ì¡°í•­

âš ï¸ **ë³¸ ì‹œìŠ¤í…œì€ êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.**

- ì‹¤ì œ íˆ¬ì ê¶Œìœ ê°€ ì•„ë‹™ë‹ˆë‹¤
- ì—­ë°œìƒ ì „ëµì€ ë†’ì€ ë¦¬ìŠ¤í¬ë¥¼ ìˆ˜ë°˜í•©ë‹ˆë‹¤
- íˆ¬ì ê²°ì •ì€ ë³¸ì¸ì˜ íŒë‹¨ê³¼ ì±…ì„ í•˜ì— ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤
- ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ê°€ ì‹¤ì œ ìˆ˜ìµì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

---

**Version**: 2.0
**Last Updated**: 2025-11-23
**Maintainer**: PRISM-INSIGHT Development Team
